title: 'MIT 6.824 Lab 1 (6) - 实现'
tags:
- MIT 6.824
- Go
- MapReduce
---

`Lab 1` 需要我们实现一个单机多线程的 `MapReduce` 程序，结合 `MapReduce` 的主要流程首先来看一下在本实验中需要做什么：

1. 首先 `MapReduce` 框架将输入数据分为 `M` 片，每片数据大小一般为 `16 MB` 至 `64 MB`（具体大小可由用户入参控制）：这里可简单使用输入文件的个数作为 `M` 的值，也不需要对输入文件进行数据块切分，当然如果文件数量过多或者单个文件过大也可以将单个文件拆分后分发给多个 `map` 节点
2. 在所有的程序拷贝中，某台机器上的程序会成为主节点（`master`），其余称为工作节点（`worker`），由主节点向工作节点分派任务，一共有 `M` 个 `map` 任务和 `R` 个 `reduce` 任务需要分派：这里的主节点就是我们需要实现的 `Coordinator` 类，`R` 在本实验中固定为10
3. 如果某个工作节点被分派了 `map` 任务则会读取当前的数据分片，然后将输入数据解析为一组键值对后传递给用户自定义的 `map` 函数执行。`map` 函数产生的中间结果键值对会暂存在内存中：按照第一条的规则，当前的数据分片就是一个文件，`map` 节点读取文件内容后通过插件加载用户自定义的 `map` 函数，调用 `map` 函数后生成一组中间结果键值对

参考：

* [6.824 Lab 1: MapReduce](https://pdos.csail.mit.edu/6.824/labs/lab-mr.html)